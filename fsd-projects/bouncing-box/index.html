<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" type="image/x-icon"  href="img/4-color puzzle.png" >
    <meta charset="utf-8" />
    <title>Bouncing Box</title>
    <script src="jquery.min.js"></script>

    <style>

      body 
      {
        background-image: url(/fsd-projects/bouncing-box/img/color-boxes.jpeg);
        background-repeat: no-repeat;
        background-size: cover;
      }

      .box 
      {
        width: 70px; 
        height: 70px;

        /* possible colors of BOX */
        background-color: brown;   
        background-color: deeppink;   
        background-color: orange;   
        background-color: orangered;   
        background-color: yellow;   
        background-color: deepskyblue;   
        background-color: darkseagreen;   

        background-color: whitesmoke;   /* initial BOX color when game begins */
        
        background-color: randomColor;    /* on each click, a random color from the 7 above is chosen */

        font-size: 200%;              /* font size of text inside BOX */
        text-align: center; 
        user-select: none;

        /* display: block; */         /* change so text is centered H&V */

        /* next 3 lines BELOW -- are to CENTER contents HORIZ & VERT */
        display: flex;
        justify-content: center;
        align-items: center;
        /* 3 lines ABOVE -- are to CENTER contents HORIZ & VERT */

        position: absolute;

        top: 114px;
        top: 400px;
        /* Changing the value of "top:"" attribute makes the box start in a different VERTICAL position. */

        /* However, changing the value for the "left:" attribute does not seem to change anything.  ???*/
        /* Change me!   ??? what does changing the left: attribute of .box do ??? */
        left: 0px;
        left: 4000px;
        
      }  /* end of box details */


      .board 
      {
        height: 100vh;
      }
      
    </style>
    <!-- 	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
  </head>

  
  <body class="board">
    
    <!-- HTML for the box ~ ~ the question mark ? appears in the box -->
    <!-- use this area to display an image instead of text ??? url ???  image with src info  -->
    <!-- go back to first lessons for initial webpage -->
    <div class="box">?</div>

    <script>
      (function () 
      {
        "use strict";
        /* global jQuery */

        //////////////////////////////////////////////////////////////////
        /////////////////// SETUP DO NOT DELETE //////////////////////////
        //////////////////////////////////////////////////////////////////

        var box           = jQuery(".box");   // reference to the HTML .box element
        var board         = jQuery(".board"); // reference to the HTML .board element
        var boardWidth    = board.width();    // MAX X-coord of screen
        var boardHeight   = board.height();   // MAX Y-coord of screen

        var boxHypot    = Math.sqrt(box.width**2 + box.height**2);  // determine the hypotenuse of the box 

        // Every 50 milliseconds, call the update Function (see below)
        setInterval(update, 50);

        // Every time the box is clicked, call the handleBoxClick Function (see below)
        box.on("click", handleBoxClick);

        // moves the Box to a new position on the screen along the X-Axis
        function moveBoxTo(newPositionX, newPositionY) 
        {
          box.css("left", newPositionX);
          box.css("top", newPositionY);
        }

        // changes the text displayed on the Box
        function changeBoxText(newText) 
        {
          box.text(newText);
        }

        //////////////////////////////////////////////////////////////////
        /////////////////// YOUR CODE BELOW HERE /////////////////////////
        //////////////////////////////////////////////////////////////////

        

        moveBoxTo(boardWidth); // Moves the box to the far right edge       
        
        moveBoxTo(300); // Moves the box to the x-position 300


        // TODO 2 - Variable declarations

        var positionX = 0;
        var speedX = 1;

        // new code to move box UP & DOWN 
        var positionY = 500;                // {see if this makes box begin more in the middle }
        var speedY = 1;

        var points = 0;

       
        var randomColor;      // create a variable to hold the random color of the box       
        

        

        /* 
            ~ ~ ~ update() function ~ ~ ~ 

        This Function will be called 20 times/second. Each time it is called,
        it should move the Box to a new location. 
        
        If the box drifts off the screen, turn it around! 
        */
        function update() 
        {
          positionX = positionX + speedX;
          positionY = positionY + speedY;

          moveBoxTo( positionX, positionY ) ;

          // Make sure box stays within HORIZONTAL boundaries!

          // if (positionX > boardWidth-box.width)   -- THIS SCREWED THINGS UP !
          
          // see if image has reached RIGHT wall
          if (positionX > boardWidth) 
          {
            // image reached RIGHT wall, so REVERSE direction
            speedX = speedX * -1;
          }
          // see if image has reached LEFT wall
          if (positionX < 0)
          {
            // image reached RIGHT wall, so REVERSE direction
            speedX = speedX * -1;
          }

          

          
          //if (positionY > boardHeight-box.height) -- THIS SCREWED THINGS UP !

          // see if image has reached BOTTOM wall
          if (positionY > boardHeight)
          {
            // image reached BOTTOM wall, so REVERSE direction
            speedY = speedY * -1;
          }

          // see if image has reached TOP wall
          if (positionY < 0)
          {
            // image reached BOTTOM wall, so REVERSE direction
            speedY = speedY * -1;
          }
          
        } //end update function



      /* 
			This Function will be called each time the BOX is clicked. 
      When called, it will:
        - change the color of the box 
        - move box to a random spot on the screen
        - increase the points total
        - increase the speed
			
			*/
      function handleBoxClick() 
      {
          // change the color of the box to a random color
          changeBoxColor();   

          // create random X & Y positions for the BOX 
          positionX = Math.floor(Math.random() * boardWidth);
          positionY = Math.floor(Math.random() * boardHeight);

          // update points and display new points inside the BOX 
          points = points + 1;
          changeBoxText(points);

          // is it possible to get debug info printed out at the console  ??? 
          console.log("box was clicked " + points + " times") 
          
          // increase the speed on the X & Y axes
         
          //speedX = 1 * points + 1;
          //speedY = 1 * points + 1;

          // ~ ~ ~ EXPERIMENT - increase speed SLOWLY or DO NOT change  ~ ~ ~ 
          speedX = speedX + 2.5;
          speedY = speedY + 2.5;
          // ~ ~ ~ I like this slower speed.  I can only get up to 13 on the box in ONE MINUTE ! ~ ~ ~ 
          
          // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  * * * * * * * *  * * * * * * * * 
          // TODO: improve game
          //
          //  - Add a display of the Box SPEED.  It's supposed to keep increasing, but sometimes it seems to slow down ????
          //
          //  - How many clicks can you get in 1 minute? 
          //      -- Game ends after 1 minute. 
          //      -- HIGH SCORE of top 5 player are displayed ?
          //
          //  - Certain number of mis-clicks (3? or 5?) will lower your score.
          // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *  * * * * * * * *  * * * * * * * * 


        }// end of function handleBoxClick()



        // choose a random color from the list of colors 
        function changeBoxColor()
        {

          const boxColors = [ "brown", "deeppink", "deepskyblue", "darkseagreen","yellow", "orange", "orangered" ]

          // ~ ~ TRYING new way to get DIFFERENT random color on each CLICK ~ ~ 

          // get a "new" random color 
          var randomIndex = Math.floor(Math.random() * boxColors.length);
          var newColor    = boxColors[randomIndex];

          // while the newly generated randomColor is the same, try again 
          while (newColor === randomColor)
          {
            randomIndex = Math.floor(Math.random() * boxColors.length);

            newColor    = boxColors[randomIndex];
          }


          // save the "new & different" randomColor 
          randomColor = newColor;


          // udate the CSS for the BOX with the RANDOM background color
          box.css("background-color", randomColor);

          // write new random color to console log ~ ~ writing to console does NOT seem to work ??? 
          console.log("new rando color = " + randomColor); 


        } // end of function changeBoxColor()


        // ~ ~ ~ ~ DO NOT change END OF CODE ! ! ~ ~ ~ ~ 
      })();
    </script>
  </body>
</html>
